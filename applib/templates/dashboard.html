{% extends 'base.html' %}

{% block in_style %}
.top_up{
	margin-top: 0px;
	padding: 20px;
	padding-bottom: 10px;
}

.style_card{
	margin: 0px;
	position: relative;
}

.bar_body{
	padding-top:20px;
	padding-right:0px;
	padding-bottom:0px;
	padding-left:0px;

}

.widget-numbers {
    font-weight: bold;
    font-size: 2.5rem;
    display: block;
    line-height: 1;
    margin: 1rem auto;
}

.widget-chart{
    font-weight: bold;
    font-size: 2.5rem;
    display: block;
    line-height: 1;
    margin: 1rem auto;
    position: relative;
    z-index: 5;
}

.widget-chart .widget-chart-content {
    position: relative;
    z-index: 5;
}

.widget-chart .widget-numbers+.widget-chart-flex, .widget-chart .widget-numbers+.widget-description, .widget-chart .widget-numbers+.widget-subheading {
    margin-top: -.5rem;
}

.widget-chart .widget-subheading {
    margin: -0.5rem 0 0;
    display: block;
    opacity: .6;
}

.fsize-1 {
    font-size: .95rem !important;
}

.opacity-10 {
    opacity: 1 !important;
}

.opacity-8 {
    opacity: .8 !important;
}

.widget-description {
   
}

.donut{
	padding-bottom: 0px;
    margin-top: 43px;
    height: 91%;
    padding-right: 0px;
    padding-left: 0px;
    position: relative;

}

{% endblock%}

{% block main %}
<div class="row">
	<div class="col-md-4">
	   <div class="card bg-white text-center border-secondary allsides top_up">
	    	<div class="widget-chart-content">
		    	<div class="card-header">Mobile Users</div>
		    	
		    	<a href="{{url_for('mobile.users')}}" class="widget-numbers"
                    title="View Complete Report">
		    		<span>{{total_users}}</span>
		      	</a>

		      	<div class="widget-subheading fsize-1 pt-2 opacity-10 text-muted font-weight-bold" style="padding-bottom: 0px;">
		        	present month: <span>{{users_montly_count}}</span>
		      	</div>

	    	</div>
	    </div>
	</div>


	<div class="col-md-4">
	   <div class="card bg-white text-center border-secondary allsides top_up">
	    	<div class="widget-chart-content">
		    	<div class="card-header">Payments</div>
		    	
		    	<a href="#" class="widget-numbers" title="View Complete Report">
		    		<span>35</span>
		      	</a>

		      	<div class="widget-subheading fsize-1 pt-2 opacity-10 text-muted font-weight-bold" style="padding-bottom: 0px;">
		        	present month: <span>70</span>
		      	</div>
		  
	    	</div>
	    </div>
	</div>


	<div class="col-md-4">
	   <div class="card bg-white text-center border-secondary allsides top_up">
	    	<div class="widget-chart-content">
		    	<div class="card-header">Transactions</div>
		    	
		    	<a href="{{url_for('transaction.transaction_view')}}" class="widget-numbers" title="View Complete Report">
		    		<span>{{total_transact}}</span>
		      	</a>

		      	<div class="widget-subheading fsize-1 pt-2 opacity-10 text-muted font-weight-bold" style="padding-bottom: 0px;">
		        	success: <span>{{successful_transact}}</span><br>failed: <span>{{failed_transact}}</span>
		      	</div>

	    	</div>
	    </div>
	</div>

</div>

<div class="row">

	<div class="col-md-7">
		<div class="card bg-white text-center border-secondary allsides donut"
				style="padding-bottom: 0px; padding-right: 10px;">
		    
		    <div class="card-body bar_body">
		    	<div style="">
		    		<div id="chart" style="min-height: 0px;"></div>
		    	</div>
		    </div>

            <div class="card-footer text-muted">
                Montly Service Report
            </div>

    	</div>
	</div>

	<div class="col-md-5">
		<div class="card bg-white text-center border-secondary allsides donut"
			style="padding-bottom: 0px;">
		    
		    <div class="card-body bar_body" style="position: relative; padding-top: 0px;">
		    	<div>
		    		<div id="donut"></div>
		    	</div>
		    </div>

		    <div class="card-footer text-muted">
			    Montly Sales Distribution
			</div>

    	</div>
	</div>

</div>

{% endblock %}


{% block login %}
{% endblock %}


{% block scripts %}
var options = {
            chart: {
                height: 320,
                width: '100%',
                type: 'line',
                shadow: {
                    enabled: true,
                    color: '#000',
                    top: 18,
                    left: 7,
                    blur: 10,
                    opacity: 0.5
                },
                toolbar: {
                    show: false
                }
            },
            colors: ['#77B6EA', '#545454', '#00cc44', '#b10cf2'],
            dataLabels: {
                enabled: true,
            },
            stroke: {
                curve: 'smooth'
            },
            series: {{series}}
            		[{
                    name: "Airtime",
                    data: [0, 1060201, 33, 36, 32, 1060, 33, 21, 14, 15, 33]
	                },
	                {
	                    name: "Cable",
	                    data: [0, 31, 24, 28, 1905, 27, 34, 19, 0, 29, 23]
	                }, 
	                {
	                    name: "Electricity",
	                    data: [0, 11, 14, 18, 0, 13, 13, 11, 34, 25, 13]
	                },
	                {
	                    name: "Data",
	                    data: [0, 400, 40, 39, 27, 22, 0, 13, 24, 15, 5690]
	                }],
            title: {
                text: 'Transactions',
                align: 'left',
                style: {
			              color: undefined,
			              fontSize: '18px',
			              fontFamily: 'Helvetica, Arial, sans-serif',
			              cssClass: 'apexcharts-yaxis-title',
			        },
            },
            grid: {
                borderColor: '#e7e7e7',
                row: {
                    colors: ['#edfaf4', 'transparent'], // takes an array which will be repeated on columns
                    opacity: 0.5
                },
                padding: {
			        top: 15,
			        right: 0,
			        bottom: 0,
			        left: 0
			    },
            },
            markers: {
                
                size: 6
            },
            xaxis: {
                categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul' ,'Sep', 'Oct', 'Nov', 'Dec'],
                title: {
                    text: 'Month',
                    style: {
			              color: undefined,
			              fontSize: '15px',
			              fontFamily: 'Helvetica, Arial, sans-serif',
			              cssClass: 'apexcharts-yaxis-title',
			        },
                },
            },
            yaxis: {
                title: {
                    text: 'Amount',
                    style: {
			              color: undefined,
			              fontSize: '15px',
			              fontFamily: 'Helvetica, Arial, sans-serif',
			              cssClass: 'apexcharts-yaxis-title',
			        },
                },
                min: 5000,
                max: 2000000
            },
            legend: {
                position: 'top',
                horizontalAlign: 'right',
                floating: true,
                offsetY: -25,
                offsetX: -5
            }
        }

        var chart = new ApexCharts(
            document.querySelector("#chart"),
            options
        );

        chart.render();




var options = {
            chart: {
                width: '100%',
                type: 'pie',
                height: '400px',
            },
            colors: ['#77B6EA', '#545454', '#00cc44', '#b10cf2'],
            dataLabels: {
                enabled: true
            },
            labels: ['Airtime', 'Cable', 'Electricity', 'Data'],
            series: [4400, 5500, 1315, 3345],
            responsive: [{
                breakpoint: 480,
                options: {
                    chart: {
                        width: 200
                        },
                    }
                }],
            legend: {
                position: 'bottom',
            }
        }

        var chart = new ApexCharts(
            document.querySelector("#donut"),
            options
        );

        chart.render()

{% endblock %}